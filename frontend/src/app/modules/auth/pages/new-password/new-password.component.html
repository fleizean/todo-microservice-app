<form class="my-10 space-y-6" (ngSubmit)="onSubmit()">
  <div class="text-center">
    <h2 class="text-foreground mb-1 text-3xl font-semibold">Setup New Password</h2>
    <p class="text-muted-foreground text-sm">
      Have you already reset the password ? <a class="text-primary" routerLink="/auth/sign-in"> Sign in</a>
    </p>
  </div>

  <!-- Message display -->
  <div *ngIf="message" class="text-center p-3 rounded-md text-sm" 
       [ngClass]="{
         'bg-green-100 text-green-700 border border-green-200': isSuccess,
         'bg-red-100 text-red-700 border border-red-200': !isSuccess
       }">
    {{ message }}
  </div>

  <div class="space-y-3 text-left">
    <div class="relative">
      <input 
        [type]="showPassword ? 'text' : 'password'" 
        id="password" 
        class="peer block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" 
        placeholder=" "
        [(ngModel)]="password"
        name="password"
        required
        [disabled]="isLoading || isSuccess" />
      <label
        for="password"
        class="bg-background text-muted-foreground peer-focus:text-primary absolute top-2 z-10 origin-[0] -translate-y-4 scale-95 transform px-2 text-sm duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-95 peer-focus:px-2 ltr:left-1 rtl:right-1">
        Password
      </label>
      <span class="text-muted-foreground absolute top-2 cursor-pointer ltr:right-3 rtl:left-3" (click)="togglePasswordVisibility()">
        <svg-icon [src]="showPassword ? 'assets/icons/heroicons/outline/eye.svg' : 'assets/icons/heroicons/outline/eye-off.svg'" [svgClass]="'h-5 w-5'"> </svg-icon>
      </span>
    </div>
    <!-- Password Meeter -->
    <div class="grid grid-cols-4 gap-2">
      <div class="rounded-xs h-1" [ngClass]="password.length >= 2 ? 'bg-red-400' : 'bg-muted'"></div>
      <div class="rounded-xs h-1" [ngClass]="password.length >= 4 ? 'bg-yellow-400' : 'bg-muted'"></div>
      <div class="rounded-xs h-1" [ngClass]="password.length >= 6 ? 'bg-blue-400' : 'bg-muted'"></div>
      <div class="rounded-xs h-1" [ngClass]="password.length >= 8 ? 'bg-green-400' : 'bg-muted'"></div>
    </div>
    <span class="text-muted-foreground text-xs">
      Use 8 or more characters with a mix of letters, numbers & symbols.
    </span>
    <div class="relative">
      <input 
        [type]="showConfirmPassword ? 'text' : 'password'" 
        id="confirm-password" 
        class="peer block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-transparent focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" 
        placeholder=" "
        [(ngModel)]="confirmPassword"
        name="confirmPassword"
        required
        [disabled]="isLoading || isSuccess" />
      <label
        for="confirm-password"
        class="bg-background text-muted-foreground peer-focus:text-primary absolute top-2 z-10 origin-[0] -translate-y-4 scale-95 transform px-2 text-sm duration-300 peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:scale-100 peer-focus:top-2 peer-focus:-translate-y-4 peer-focus:scale-95 peer-focus:px-2 ltr:left-1 rtl:right-1">
        Confirm Password
      </label>
      <span class="text-muted-foreground absolute top-2 cursor-pointer ltr:right-3 rtl:left-3" (click)="toggleConfirmPasswordVisibility()">
        <svg-icon [src]="showConfirmPassword ? 'assets/icons/heroicons/outline/eye.svg' : 'assets/icons/heroicons/outline/eye-off.svg'" [svgClass]="'h-5 w-5'"> </svg-icon>
      </span>
    </div>
  </div>

  <!-- Submit Button -->
  <div>
    <app-button 
      type="submit"
      full 
      impact="bold" 
      tone="primary" 
      shape="rounded" 
      size="medium"
      [disabled]="isLoading || isSuccess || !email || !token">
      {{ isLoading ? 'Resetting...' : 'Submit' }}
    </app-button>
  </div>
</form>
